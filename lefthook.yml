pre-commit:
  parallel: false
  commands:
    format-elixir:
      root: "opal/"
      glob: "**/*.{ex,exs}"
      run: mise exec -- mix format {staged_files}
      stage_fixed: true

    dialyzer:
      root: "opal/"
      glob: "**/*.{ex,exs}"
      run: mise exec -- mix dialyzer

    format-cli:
      root: "cli/"
      glob: "src/**/*.{ts,tsx}"
      run: mise exec -- npx prettier --write {staged_files} && mise exec -- npx eslint --fix {staged_files}
      stage_fixed: true
