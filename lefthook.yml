pre-commit:
  parallel: false
  commands:
    format-elixir:
      root: "core/"
      glob: "**/*.{ex,exs}"
      run: mix format {staged_files}
      stage_fixed: true

    format-cli:
      root: "cli/"
      glob: "src/**/*.{ts,tsx}"
      run: npx prettier --write {staged_files} && npx eslint --fix {staged_files}
      stage_fixed: true

    test-elixir:
      glob: "core/**/*.{ex,exs}"
      run: cd core && mix test

    test-cli:
      glob: "cli/**/*.{ts,tsx}"
      run: cd cli && pnpm test
